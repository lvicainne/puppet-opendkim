# Reference

<!-- DO NOT EDIT: This document was generated by Puppet Strings -->

## Table of Contents

### Classes

#### Public Classes

* [`opendkim`](#opendkim): This class manages the opendkim service.

#### Private Classes

* `opendkim::config`: Configure opendkim
* `opendkim::install`: Managing the opendkim installation
* `opendkim::service`: Managing the opendkim service
* `opendkim::user`: Managing the opendkim user

### Data types

* [`Opendkim::Key`](#Opendkim--Key): Validate an opendkim key struct

## Classes

### <a name="opendkim"></a>`opendkim`

This class manages the opendkim service.

* **See also**
  * Please
    * see the README.md

#### Parameters

The following parameters are available in the `opendkim` class:

* [`user`](#-opendkim--user)
* [`uid`](#-opendkim--uid)
* [`user_shell`](#-opendkim--user_shell)
* [`user_system`](#-opendkim--user_system)
* [`homedir`](#-opendkim--homedir)
* [`group`](#-opendkim--group)
* [`gid`](#-opendkim--gid)
* [`group_system`](#-opendkim--group_system)
* [`configdir`](#-opendkim--configdir)
* [`configfile`](#-opendkim--configfile)
* [`pidfile`](#-opendkim--pidfile)
* [`rundir_mode`](#-opendkim--rundir_mode)
* [`sysconfigfile`](#-opendkim--sysconfigfile)
* [`package_name`](#-opendkim--package_name)
* [`service_name`](#-opendkim--service_name)
* [`service_ensure`](#-opendkim--service_ensure)
* [`service_enable`](#-opendkim--service_enable)
* [`log_why`](#-opendkim--log_why)
* [`subdomains`](#-opendkim--subdomains)
* [`socket`](#-opendkim--socket)
* [`umask`](#-opendkim--umask)
* [`nameservers`](#-opendkim--nameservers)
* [`mode`](#-opendkim--mode)
* [`canonicalization`](#-opendkim--canonicalization)
* [`removeoldsignatures`](#-opendkim--removeoldsignatures)
* [`maximum_signed_bytes`](#-opendkim--maximum_signed_bytes)
* [`trustanchorfile`](#-opendkim--trustanchorfile)
* [`senderheaders`](#-opendkim--senderheaders)
* [`signaturealgorithm`](#-opendkim--signaturealgorithm)
* [`minimumkeybits`](#-opendkim--minimumkeybits)
* [`additional_options`](#-opendkim--additional_options)
* [`trusted_hosts`](#-opendkim--trusted_hosts)
* [`manage_private_keys`](#-opendkim--manage_private_keys)
* [`keys`](#-opendkim--keys)
* [`alldomain`](#-opendkim--alldomain)
* [`selector`](#-opendkim--selector)
* [`publickey`](#-opendkim--publickey)
* [`publickeyextended`](#-opendkim--publickeyextended)
* [`privatekey`](#-opendkim--privatekey)
* [`key_algorithm`](#-opendkim--key_algorithm)
* [`hash_algorithms`](#-opendkim--hash_algorithms)
* [`autorestart`](#-opendkim--autorestart)
* [`autorestartrate`](#-opendkim--autorestartrate)

##### <a name="-opendkim--user"></a>`user`

Data type: `String[1]`

Name of the user running the service.

Default value: `'opendkim'`

##### <a name="-opendkim--uid"></a>`uid`

Data type: `Optional[Integer[0]]`

UserID from the user running the service.

Default value: `undef`

##### <a name="-opendkim--user_shell"></a>`user_shell`

Data type: `Stdlib::Absolutepath`

Sets the login shell of user running the service.

Default value: `'/usr/sbin/nologin'`

##### <a name="-opendkim--user_system"></a>`user_system`

Data type: `Boolean`

Switch if user should be use systemuser uid range or normal user uid range.

Default value: `true`

##### <a name="-opendkim--homedir"></a>`homedir`

Data type: `Stdlib::Absolutepath`

Homedir of the user running the service.

Default value: `'/run/opendkim'`

##### <a name="-opendkim--group"></a>`group`

Data type: `String[1]`

Name of the group running the service.
Also also set as primary group of the user running the service.

Default value: `'opendkim'`

##### <a name="-opendkim--gid"></a>`gid`

Data type: `Optional[Integer[0]]`

GroupID from the group running the service.

Default value: `undef`

##### <a name="-opendkim--group_system"></a>`group_system`

Data type: `Boolean`

Switch if group should be use systemgroup gid range or normal group gid range.

Default value: `true`

##### <a name="-opendkim--configdir"></a>`configdir`

Data type: `Stdlib::Absolutepath`

Directory where the configurations will be located.

Default value: `'/etc/opendkim'`

##### <a name="-opendkim--configfile"></a>`configfile`

Data type: `Stdlib::Absolutepath`

Path of the main config file.

Default value: `'/etc/opendkim.conf'`

##### <a name="-opendkim--pidfile"></a>`pidfile`

Data type: `Stdlib::Absolutepath`

Path of the process id file of the service.

Default value: `'/run/opendkim/opendkim.pid'`

##### <a name="-opendkim--rundir_mode"></a>`rundir_mode`

Data type: `Pattern[/\A[0-7]{3,4}\z/]`

Run directory permission of the service.

Default value: `'0755'`

##### <a name="-opendkim--sysconfigfile"></a>`sysconfigfile`

Data type: `Optional[Stdlib::Absolutepath]`

Path of the sysconfig file.

Default value: `undef`

##### <a name="-opendkim--package_name"></a>`package_name`

Data type: `String[1]`

Name of the package providing opendkim.

Default value: `'opendkim'`

##### <a name="-opendkim--service_name"></a>`service_name`

Data type: `String[1]`

Name of the service

Default value: `'opendkim'`

##### <a name="-opendkim--service_ensure"></a>`service_ensure`

Data type: `Stdlib::Ensure::Service`

Defines the state of the service.

Default value: `'running'`

##### <a name="-opendkim--service_enable"></a>`service_enable`

Data type: `Boolean`

Switch if service should boot at startup.

Default value: `true`

##### <a name="-opendkim--log_why"></a>`log_why`

Data type: `Variant[Boolean,Enum['yes','no']]`

If logging is enabled, issues very detailed logging about the logic behind the filter’s decision to either sign a message or verify it.

Default value: `'no'`

##### <a name="-opendkim--subdomains"></a>`subdomains`

Data type: `Variant[Boolean,Enum['yes','no']]`

Sign subdomains of those listed by the Domain parameter as well as the actual domains.

Default value: `'yes'`

##### <a name="-opendkim--socket"></a>`socket`

Data type: `String`

The socket the service should listen on.

Default value: `'inet:8891@127.0.0.1'`

##### <a name="-opendkim--umask"></a>`umask`

Data type: `Pattern[/\A[0-7]{3,4}\z/]`

Requests a specific permissions mask to be used for file creation. This only really applies to creation of the socket when Socket
specifies a UNIX domain socket, and to the PidFile.

Default value: `'0022'`

##### <a name="-opendkim--nameservers"></a>`nameservers`

Data type: `Array[Stdlib::IP::Address]`

List of IP addresses that are to be used when doing DNS queries to retrieve DKIM keys, VBR records, etc.

Default value: `[]`

##### <a name="-opendkim--mode"></a>`mode`

Data type: `Pattern[/\A[sv]{1,2}\z/]`

Selects operating modes. The string is a concatenation of characters that indicate which mode(s) of operation are desired.

Default value: `'sv'`

##### <a name="-opendkim--canonicalization"></a>`canonicalization`

Data type: `Pattern[/\A((relaxed|simple)\/)?(relaxed|simple)\z/]`

Selects the canonicalization method(s) to be used when signing messages. When verifying, the message’s DKIM-Signature: header field
specifies the canonicalization method. The recognized values are relaxed and simple as defined by the DKIM specification. The value may
include two different canonicalizations separated by a slash ("/") character, in which case the first will be applied to the header and
the second to the body.

Default value: `'relaxed/simple'`

##### <a name="-opendkim--removeoldsignatures"></a>`removeoldsignatures`

Data type: `Variant[Boolean,Enum['yes','no']]`

Removes all existing signatures when operating in signing mode.

Default value: `'no'`

##### <a name="-opendkim--maximum_signed_bytes"></a>`maximum_signed_bytes`

Data type: `Optional[Integer[1]]`

Specifies the maximum number of bytes of message body to be signed. Messages shorter than this limit will be signed in their entirety.

Default value: `undef`

##### <a name="-opendkim--trustanchorfile"></a>`trustanchorfile`

Data type: `Optional[Stdlib::Absolutepath]`

Specifies a file from which trust anchor data should be read when doing DNS queries and applying the DNSSEC protocol.

Default value: `undef`

##### <a name="-opendkim--senderheaders"></a>`senderheaders`

Data type: `Optional[Array[String,1]]`

Specifies an ordered list of header fields that should be searched to determine the sender of a message. The first header field found
is the one whose value is used. This is mainly used when signing for deciding which signing request(s) to make.

Default value: `undef`

##### <a name="-opendkim--signaturealgorithm"></a>`signaturealgorithm`

Data type: `Optional[String[1]]`

Selects the signing algorithm to use when generating signatures.

Default value: `undef`

##### <a name="-opendkim--minimumkeybits"></a>`minimumkeybits`

Data type: `Optional[Integer[1]]`

Establishes a minimum key size for acceptable signatures. Signatures with smaller key sizes, even if they otherwise pass DKIM
validation, will me marked as invalid.

Default value: `undef`

##### <a name="-opendkim--additional_options"></a>`additional_options`

Data type: `Hash[String,Variant[Array[String],String,Integer,Boolean]]`

These options will be also written into the opendkim config file

Default value: `{}`

##### <a name="-opendkim--trusted_hosts"></a>`trusted_hosts`

Data type: `Array[String,1]`

Hosts that may send mail through the server as one of the signing domains without credentials and whose mail should be signed rather
than verified.

Default value: `['::1', '127.0.0.1', 'localhost']`

##### <a name="-opendkim--manage_private_keys"></a>`manage_private_keys`

Data type: `Boolean`

Switch for the mangement of the private key files.

Default value: `true`

##### <a name="-opendkim--keys"></a>`keys`

Data type: `Array[Opendkim::Key]`

Structure of the keys to manage and to generate the configure from.

Default value: `[]`

##### <a name="-opendkim--alldomain"></a>`alldomain`

Data type: `Boolean`

Switch for an alternative mangement mode that only configures one key that will be used to sign all domains.

Default value: `false`

##### <a name="-opendkim--selector"></a>`selector`

Data type: `Optional[String[1]]`

The selector used for signing in alldomain mode.

Default value: `undef`

##### <a name="-opendkim--publickey"></a>`publickey`

Data type: `Optional[String[1]]`

The publickey used for signing in alldomain mode.

Default value: `undef`

##### <a name="-opendkim--publickeyextended"></a>`publickeyextended`

Data type: `Optional[String[1]]`

Deprecated: Just use publickey. The template will split the in chunks for the dns txt file.

The publickeyextended used for signing in alldomain mode.

Default value: `undef`

##### <a name="-opendkim--privatekey"></a>`privatekey`

Data type: `Optional[String[1]]`

The privatekey used for signing in alldomain mode.

Default value: `undef`

##### <a name="-opendkim--key_algorithm"></a>`key_algorithm`

Data type: `Optional[String[1]]`

The key_algorithm used for signing in alldomain mode.

Default value: `undef`

##### <a name="-opendkim--hash_algorithms"></a>`hash_algorithms`

Data type: `Optional[String[1]]`

The hash_algorithms used for signing in alldomain mode.

Default value: `undef`

##### <a name="-opendkim--autorestart"></a>`autorestart`

Data type: `Optional[Variant[Boolean,Enum['yes','no']]]`

Either boolean or yes/no as to whether opendkim should restart on failure

Default value: `undef`

##### <a name="-opendkim--autorestartrate"></a>`autorestartrate`

Data type: `Optional[Pattern[/\A[0-9]+\/[0-9]+[sSmMhHdD]\z/]]`

The rate limit on auto restarting

Default value: `undef`

## Data types

### <a name="Opendkim--Key"></a>`Opendkim::Key`

Validate an opendkim key struct

Alias of

```puppet
Struct[{
    domain            => String[1],
    selector          => String[1],
    key_algorithm     => Optional[String[1]],
    hash_algorithms   => Optional[String[1]],
    publickey         => String[1],
    publickeyextended => Optional[String[1]],
    privatekey        => Variant[String[1],Deferred],
    signingdomains    => Array[String[1]],
}]
```

